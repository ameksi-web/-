<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RGB –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ | Minecraft</title>
    <style>
        @font-face {
            font-family: 'Minecraft';
            src: url('https://github.com/ameksi-web/-/blob/main/minecraft.ttf') format('truetype');
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 0;
        }

        header h1 {
            font-family: 'Minecraft', sans-serif;
            font-size: 2.5rem;
            background: linear-gradient(90deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3, #54a0ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
            margin-bottom: 10px;
        }

        header p {
            color: #888;
            font-size: 1.1rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .card-title {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #54a0ff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: linear-gradient(180deg, #54a0ff, #5f27cd);
            border-radius: 2px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #aaa;
            font-size: 0.9rem;
        }

        .text-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 1.1rem;
            font-family: 'Minecraft', monospace;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: #fff;
            outline: none;
            transition: all 0.3s ease;
        }

        .text-input:focus {
            border-color: #54a0ff;
            box-shadow: 0 0 20px rgba(84, 160, 255, 0.2);
        }

        /* Color Picker Section */
        .colors-section {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            margin-bottom: 20px;
        }

        .color-item {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .color-picker-wrapper {
            position: relative;
            width: 60px;
            height: 60px;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            border: 3px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .color-picker-wrapper:hover {
            transform: scale(1.1);
            border-color: #fff;
        }

        .color-picker-wrapper input[type="color"] {
            position: absolute;
            top: -10px;
            left: -10px;
            width: 80px;
            height: 80px;
            cursor: pointer;
            border: none;
        }

        .color-hex {
            font-size: 0.75rem;
            color: #888;
            font-family: monospace;
        }

        .remove-color {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 22px;
            height: 22px;
            background: #e74c3c;
            border: none;
            border-radius: 50%;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .color-item:hover .remove-color {
            opacity: 1;
        }

        .add-color-btn {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 3px dashed rgba(255, 255, 255, 0.3);
            color: #888;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .add-color-btn:hover {
            background: rgba(84, 160, 255, 0.2);
            border-color: #54a0ff;
            color: #54a0ff;
        }

        /* Preset Colors */
        .presets {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .preset-btn {
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            font-size: 0.85rem;
            color: #fff;
            transition: all 0.3s ease;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .preset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Format Options */
        .format-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .format-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .format-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .format-btn.active {
            background: #54a0ff;
            border-color: #54a0ff;
        }

        /* Text Decorations */
        .decorations {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .deco-btn {
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .deco-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .deco-btn.active {
            background: #5f27cd;
            border-color: #5f27cd;
        }

        .deco-btn.bold { font-weight: bold; }
        .deco-btn.italic { font-style: italic; }
        .deco-btn.underline { text-decoration: underline; }
        .deco-btn.strike { text-decoration: line-through; }
        .deco-btn.obfuscated { animation: obfuscate 0.1s infinite; }

        @keyframes obfuscate {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Preview */
        .preview-box {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 12px;
            padding: 30px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Minecraft', monospace;
            font-size: 2rem;
            letter-spacing: 1px;
            text-shadow: 2px 2px 0 #000;
            word-break: break-word;
            text-align: center;
        }

        /* Output */
        .output-container {
            position: relative;
        }

        .output-box {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: #0f0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            resize: vertical;
            outline: none;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 10px 20px;
            background: linear-gradient(135deg, #54a0ff, #5f27cd);
            border: none;
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(84, 160, 255, 0.4);
        }

        .copy-btn.copied {
            background: linear-gradient(135deg, #00b894, #00cec9);
        }

        /* Output Format Selector */
        .output-format-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .output-format-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: #aaa;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }

        .output-format-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .output-format-btn.active {
            background: rgba(84, 160, 255, 0.2);
            border-color: #54a0ff;
            color: #54a0ff;
        }

        /* Additional Options */
        .options-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .option-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option-item label {
            color: #aaa;
            font-size: 0.9rem;
        }

        .option-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #54a0ff;
        }

        .option-item input[type="number"] {
            width: 70px;
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: #fff;
            outline: none;
        }

        /* Animation Toggle */
        .animation-toggle {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 26px;
            transition: 0.3s;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background: #fff;
            border-radius: 50%;
            transition: 0.3s;
        }

        .toggle-switch input:checked + .toggle-slider {
            background: linear-gradient(135deg, #54a0ff, #5f27cd);
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 30px;
            color: #666;
            font-size: 0.9rem;
        }

        footer a {
            color: #54a0ff;
            text-decoration: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8rem;
            }
            
            .preview-box {
                font-size: 1.3rem;
                padding: 20px;
            }
            
            .color-picker-wrapper {
                width: 50px;
                height: 50px;
            }
            
            .add-color-btn {
                width: 50px;
                height: 50px;
            }
        }

        /* Gradient Direction Selector */
        .direction-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .direction-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: #aaa;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .direction-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .direction-btn.active {
            background: rgba(84, 160, 255, 0.2);
            border-color: #54a0ff;
            color: #54a0ff;
        }

        /* Character Counter */
        .char-counter {
            text-align: right;
            color: #666;
            font-size: 0.85rem;
            margin-top: 5px;
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 15px 25px;
            background: linear-gradient(135deg, #00b894, #00cec9);
            border-radius: 10px;
            color: #fff;
            font-weight: 500;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* Rainbow Animation for preview */
        .preview-animated {
            animation: rainbowShift 3s linear infinite;
        }

        @keyframes rainbowShift {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        /* Obfuscated text effect */
        .obfuscated-char {
            animation: scramble 0.05s infinite;
        }

        @keyframes scramble {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚ö° RGB –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä</h1>
            <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫—Ä–∞—Å–∏–≤—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –¥–ª—è Minecraft</p>
        </header>

        <!-- Input Section -->
        <div class="card">
            <div class="card-title">–¢–µ–∫—Å—Ç</div>
            <div class="input-group">
                <input type="text" class="text-input" id="textInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–µ–∫—Å—Ç..." value="–ü—Ä–∏–≤–µ—Ç, Minecraft!" maxlength="256">
                <div class="char-counter"><span id="charCount">17</span> / 256</div>
            </div>
        </div>

        <!-- Colors Section -->
        <div class="card">
            <div class="card-title">–¶–≤–µ—Ç–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞</div>
            <div class="colors-section" id="colorsContainer">
                <!-- Colors will be added here -->
            </div>
            <button class="add-color-btn" id="addColorBtn" title="–î–æ–±–∞–≤–∏—Ç—å —Ü–≤–µ—Ç">+</button>
            
            <div style="margin-top: 20px;">
                <label style="color: #aaa; font-size: 0.9rem; margin-bottom: 10px; display: block;">–ì–æ—Ç–æ–≤—ã–µ –ø—Ä–µ—Å–µ—Ç—ã:</label>
                <div class="presets">
                    <button class="preset-btn" style="background: linear-gradient(90deg, #ff6b6b, #feca57);" onclick="applyPreset(['#ff6b6b', '#feca57'])">–ó–∞–∫–∞—Ç</button>
                    <button class="preset-btn" style="background: linear-gradient(90deg, #a29bfe, #6c5ce7);" onclick="applyPreset(['#a29bfe', '#6c5ce7'])">–§–∏–æ–ª–µ—Ç</button>
                    <button class="preset-btn" style="background: linear-gradient(90deg, #00b894, #00cec9);" onclick="applyPreset(['#00b894', '#00cec9'])">–ú—è—Ç–∞</button>
                    <button class="preset-btn" style="background: linear-gradient(90deg, #ff9ff3, #f368e0);" onclick="applyPreset(['#ff9ff3', '#f368e0'])">–†–æ–∑–æ–≤—ã–π</button>
                    <button class="preset-btn" style="background: linear-gradient(90deg, #54a0ff, #5f27cd);" onclick="applyPreset(['#54a0ff', '#5f27cd'])">–û–∫–µ–∞–Ω</button>
                    <button class="preset-btn" style="background: linear-gradient(90deg, #ff6b6b, #feca57, #48dbfb);" onclick="applyPreset(['#ff6b6b', '#feca57', '#48dbfb'])">–†–∞–¥—É–≥–∞ 3</button>
                    <button class="preset-btn" style="background: linear-gradient(90deg, #ee5a24, #f9ca24, #6ab04c, #22a6b3, #be2edd);" onclick="applyPreset(['#ee5a24', '#f9ca24', '#6ab04c', '#22a6b3', '#be2edd'])">–†–∞–¥—É–≥–∞ 5</button>
                    <button class="preset-btn" style="background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #8f00ff);" onclick="applyPreset(['#ff0000', '#ff7f00', '#ffff00', '#00ff00', '#0000ff', '#4b0082', '#8f00ff'])">–ü–æ–ª–Ω–∞—è —Ä–∞–¥—É–≥–∞</button>
                    <button class="preset-btn" style="background: linear-gradient(90deg, #2c3e50, #3498db);" onclick="applyPreset(['#2c3e50', '#3498db'])">–ù–æ—á—å</button>
                    <button class="preset-btn" style="background: linear-gradient(90deg, #f39c12, #e74c3c);" onclick="applyPreset(['#f39c12', '#e74c3c'])">–û–≥–æ–Ω—å</button>
                    <button class="preset-btn" style="background: linear-gradient(90deg, #55efc4, #81ecec, #74b9ff);" onclick="applyPreset(['#55efc4', '#81ecec', '#74b9ff'])">–ê–∫–≤–∞</button>
                    <button class="preset-btn" style="background: linear-gradient(90deg, #fd79a8, #a29bfe);" onclick="applyPreset(['#fd79a8', '#a29bfe'])">–°–∞–∫—É—Ä–∞</button>
                </div>
            </div>
        </div>

        <!-- Format Options -->
        <div class="card">
            <div class="card-title">–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
            <div class="decorations">
                <button class="deco-btn bold" id="boldBtn" title="–ñ–∏—Ä–Ω—ã–π">B</button>
                <button class="deco-btn italic" id="italicBtn" title="–ö—É—Ä—Å–∏–≤">I</button>
                <button class="deco-btn underline" id="underlineBtn" title="–ü–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–π">U</button>
                <button class="deco-btn strike" id="strikeBtn" title="–ó–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π">S</button>
                <button class="deco-btn obfuscated" id="obfuscatedBtn" title="–ú–∞–≥–∏—á–µ—Å–∫–∏–π">?</button>
            </div>

            <div class="options-row">
                <div class="option-item">
                    <input type="checkbox" id="reverseGradient">
                    <label for="reverseGradient">–û–±—Ä–∞—Ç–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç</label>
                </div>
            </div>
        </div>

        <!-- Preview Section -->
        <div class="card">
            <div class="card-title">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</div>
            <div class="animation-toggle">
                <label class="toggle-switch">
                    <input type="checkbox" id="animatePreview">
                    <span class="toggle-slider"></span>
                </label>
                <span style="color: #aaa;">–ê–Ω–∏–º–∞—Ü–∏—è —Ä–∞–¥—É–≥–∏</span>
            </div>
            <div class="preview-box" id="previewBox">
                <!-- Preview will be rendered here -->
            </div>
        </div>

        <!-- Output Section -->
        <div class="card">
            <div class="card-title">–†–µ–∑—É–ª—å—Ç–∞—Ç</div>
            
            <div class="output-format-selector">
                <button class="output-format-btn active" data-format="minimessage">MiniMessage</button>
                <button class="output-format-btn" data-format="legacy">&amp; –ö–æ–¥—ã</button>
                <button class="output-format-btn" data-format="legacysection">¬ß –ö–æ–¥—ã</button>
                <button class="output-format-btn" data-format="bbcode">BBCode</button>
                <button class="output-format-btn" data-format="html">HTML</button>
                <button class="output-format-btn" data-format="json">JSON (Tellraw)</button>
                <button class="output-format-btn" data-format="motd">MOTD</button>
            </div>

            <div class="output-container">
                <textarea class="output-box" id="outputBox" readonly></textarea>
                <button class="copy-btn" id="copyBtn">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
        </div>

        <footer>
            <p>–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è Minecraft —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</p>
            <p style="margin-top: 10px;">–ë–µ–∑–ª–∏–º–∏—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Ä¢ –í—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è</p>
        </footer>
    </div>

    <div class="notification" id="notification">‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!</div>

    <script>
        // State
        let colors = ['#ff6b6b', '#feca57', '#48dbfb'];
        let currentFormat = 'minimessage';
        let decorations = {
            bold: false,
            italic: false,
            underline: false,
            strikethrough: false,
            obfuscated: false
        };

        // DOM Elements
        const textInput = document.getElementById('textInput');
        const colorsContainer = document.getElementById('colorsContainer');
        const addColorBtn = document.getElementById('addColorBtn');
        const previewBox = document.getElementById('previewBox');
        const outputBox = document.getElementById('outputBox');
        const copyBtn = document.getElementById('copyBtn');
        const notification = document.getElementById('notification');
        const charCount = document.getElementById('charCount');
        const animatePreview = document.getElementById('animatePreview');
        const reverseGradient = document.getElementById('reverseGradient');

        // Initialize
        function init() {
            renderColors();
            updatePreview();
            setupEventListeners();
        }

        function setupEventListeners() {
            textInput.addEventListener('input', () => {
                charCount.textContent = textInput.value.length;
                updatePreview();
            });

            addColorBtn.addEventListener('click', () => {
                const randomColor = '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
                colors.push(randomColor);
                renderColors();
                updatePreview();
            });

            // Format buttons
            document.querySelectorAll('.output-format-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.output-format-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentFormat = btn.dataset.format;
                    updatePreview();
                });
            });

            // Decoration buttons
            document.getElementById('boldBtn').addEventListener('click', function() {
                this.classList.toggle('active');
                decorations.bold = this.classList.contains('active');
                updatePreview();
            });

            document.getElementById('italicBtn').addEventListener('click', function() {
                this.classList.toggle('active');
                decorations.italic = this.classList.contains('active');
                updatePreview();
            });

            document.getElementById('underlineBtn').addEventListener('click', function() {
                this.classList.toggle('active');
                decorations.underline = this.classList.contains('active');
                updatePreview();
            });

            document.getElementById('strikeBtn').addEventListener('click', function() {
                this.classList.toggle('active');
                decorations.strikethrough = this.classList.contains('active');
                updatePreview();
            });

            document.getElementById('obfuscatedBtn').addEventListener('click', function() {
                this.classList.toggle('active');
                decorations.obfuscated = this.classList.contains('active');
                updatePreview();
            });

            // Copy button
            copyBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(outputBox.value).then(() => {
                    copyBtn.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                    copyBtn.classList.add('copied');
                    notification.classList.add('show');
                    
                    setTimeout(() => {
                        copyBtn.textContent = 'üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å';
                        copyBtn.classList.remove('copied');
                        notification.classList.remove('show');
                    }, 2000);
                });
            });

            // Animation toggle
            animatePreview.addEventListener('change', () => {
                if (animatePreview.checked) {
                    previewBox.classList.add('preview-animated');
                } else {
                    previewBox.classList.remove('preview-animated');
                }
            });

            // Reverse gradient
            reverseGradient.addEventListener('change', updatePreview);
        }

        function renderColors() {
            colorsContainer.innerHTML = '';
            colors.forEach((color, index) => {
                const colorItem = document.createElement('div');
                colorItem.className = 'color-item';
                colorItem.innerHTML = `
                    <div class="color-picker-wrapper" style="background: ${color}">
                        <input type="color" value="${color}" data-index="${index}">
                    </div>
                    <span class="color-hex">${color.toUpperCase()}</span>
                    ${colors.length > 2 ? `<button class="remove-color" data-index="${index}">√ó</button>` : ''}
                `;
                colorsContainer.appendChild(colorItem);
            });

            // Color change events
            colorsContainer.querySelectorAll('input[type="color"]').forEach(input => {
                input.addEventListener('input', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    colors[index] = e.target.value;
                    e.target.parentElement.style.background = e.target.value;
                    e.target.parentElement.nextElementSibling.textContent = e.target.value.toUpperCase();
                    updatePreview();
                });
            });

            // Remove color events
            colorsContainer.querySelectorAll('.remove-color').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    colors.splice(index, 1);
                    renderColors();
                    updatePreview();
                });
            });
        }

        function applyPreset(presetColors) {
            colors = [...presetColors];
            renderColors();
            updatePreview();
        }

        // Gradient calculation
        function interpolateColor(color1, color2, factor) {
            const r1 = parseInt(color1.slice(1, 3), 16);
            const g1 = parseInt(color1.slice(3, 5), 16);
            const b1 = parseInt(color1.slice(5, 7), 16);
            
            const r2 = parseInt(color2.slice(1, 3), 16);
            const g2 = parseInt(color2.slice(3, 5), 16);
            const b2 = parseInt(color2.slice(5, 7), 16);
            
            const r = Math.round(r1 + (r2 - r1) * factor);
            const g = Math.round(g1 + (g2 - g1) * factor);
            const b = Math.round(b1 + (b2 - b1) * factor);
            
            return '#' + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('');
        }

        function getGradientColors(text, colorStops) {
            const result = [];
            const chars = text.replace(/\s/g, '');
            const len = chars.length;
            
            if (len === 0) return result;
            if (len === 1) return [colorStops[0]];
            
            let stops = [...colorStops];
            if (reverseGradient.checked) {
                stops = stops.reverse();
            }

            for (let i = 0; i < len; i++) {
                const progress = i / (len - 1);
                const segmentCount = stops.length - 1;
                const segment = Math.min(Math.floor(progress * segmentCount), segmentCount - 1);
                const segmentProgress = (progress * segmentCount) - segment;
                
                const color = interpolateColor(stops[segment], stops[segment + 1], segmentProgress);
                result.push(color);
            }
            
            return result;
        }

        function updatePreview() {
            const text = textInput.value;
            if (!text) {
                previewBox.innerHTML = '<span style="color: #666;">–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç...</span>';
                outputBox.value = '';
                return;
            }

            const gradientColors = getGradientColors(text, colors);
            let colorIndex = 0;
            let previewHTML = '';

            for (let char of text) {
                if (char === ' ') {
                    previewHTML += ' ';
                } else {
                    let style = `color: ${gradientColors[colorIndex]};`;
                    let classes = '';
                    
                    if (decorations.bold) style += 'font-weight: bold;';
                    if (decorations.italic) style += 'font-style: italic;';
                    if (decorations.underline) style += 'text-decoration: underline;';
                    if (decorations.strikethrough) style += 'text-decoration: line-through;';
                    if (decorations.underline && decorations.strikethrough) {
                        style += 'text-decoration: underline line-through;';
                    }
                    if (decorations.obfuscated) {
                        classes = 'obfuscated-char';
                    }

                    previewHTML += `<span class="${classes}" style="${style}">${escapeHtml(char)}</span>`;
                    colorIndex++;
                }
            }

            previewBox.innerHTML = previewHTML;
            generateOutput();
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function generateOutput() {
            const text = textInput.value;
            if (!text) {
                outputBox.value = '';
                return;
            }

            const gradientColors = getGradientColors(text, colors);
            let output = '';

            switch (currentFormat) {
                case 'minimessage':
                    output = generateMiniMessage(text, gradientColors);
                    break;
                case 'legacy':
                    output = generateLegacy(text, gradientColors, '&');
                    break;
                case 'legacysection':
                    output = generateLegacy(text, gradientColors, '¬ß');
                    break;
                case 'bbcode':
                    output = generateBBCode(text, gradientColors);
                    break;
                case 'html':
                    output = generateHTML(text, gradientColors);
                    break;
                case 'json':
                    output = generateJSON(text, gradientColors);
                    break;
                case 'motd':
                    output = generateMOTD(text, gradientColors);
                    break;
            }

            outputBox.value = output;
        }

        function getDecorationPrefix(prefix) {
            let result = '';
            if (decorations.bold) result += prefix + 'l';
            if (decorations.italic) result += prefix + 'o';
            if (decorations.underline) result += prefix + 'n';
            if (decorations.strikethrough) result += prefix + 'm';
            if (decorations.obfuscated) result += prefix + 'k';
            return result;
        }

        function generateMiniMessage(text, gradientColors) {
            const colorsStr = colors.map(c => c).join(':');
            let decos = [];
            if (decorations.bold) decos.push('bold');
            if (decorations.italic) decos.push('italic');
            if (decorations.underline) decos.push('underlined');
            if (decorations.strikethrough) decos.push('strikethrough');
            if (decorations.obfuscated) decos.push('obfuscated');
            
            let result = `<gradient:${colorsStr}>`;
            if (decos.length > 0) {
                result = `<${decos.join('>')}><gradient:${colorsStr}>`;
            }
            result += text;
            result += '</gradient>';
            if (decos.length > 0) {
                result += decos.map(d => `</${d}>`).reverse().join('');
            }
            return result;
        }

        function generateLegacy(text, gradientColors, prefix) {
            let result = '';
            let colorIndex = 0;
            const decoPrefix = getDecorationPrefix(prefix);

            for (let char of text) {
                if (char === ' ') {
                    result += ' ';
                } else {
                    const color = gradientColors[colorIndex].replace('#', '');
                    result += `${prefix}#${color}${decoPrefix}${char}`;
                    colorIndex++;
                }
            }
            return result;
        }

        function generateBBCode(text, gradientColors) {
            let result = '';
            let colorIndex = 0;

            for (let char of text) {
                if (char === ' ') {
                    result += ' ';
                } else {
                    let formatted = char;
                    if (decorations.bold) formatted = `[b]${formatted}[/b]`;
                    if (decorations.italic) formatted = `[i]${formatted}[/i]`;
                    if (decorations.underline) formatted = `[u]${formatted}[/u]`;
                    if (decorations.strikethrough) formatted = `[s]${formatted}[/s]`;
                    
                    result += `[color=${gradientColors[colorIndex]}]${formatted}[/color]`;
                    colorIndex++;
                }
            }
            return result;
        }

        function generateHTML(text, gradientColors) {
            let result = '';
            let colorIndex = 0;

            for (let char of text) {
                if (char === ' ') {
                    result += ' ';
                } else {
                    let style = `color: ${gradientColors[colorIndex]};`;
                    if (decorations.bold) style += ' font-weight: bold;';
                    if (decorations.italic) style += ' font-style: italic;';
                    if (decorations.underline) style += ' text-decoration: underline;';
                    if (decorations.strikethrough) style += ' text-decoration: line-through;';
                    
                    result += `<span style="${style}">${escapeHtml(char)}</span>`;
                    colorIndex++;
                }
            }
            return result;
        }

        function generateJSON(text, gradientColors) {
            const components = [];
            let colorIndex = 0;

            for (let char of text) {
                if (char === ' ') {
                    components.push({ text: ' ' });
                } else {
                    const component = {
                        text: char,
                        color: gradientColors[colorIndex]
                    };
                    if (decorations.bold) component.bold = true;
                    if (decorations.italic) component.italic = true;
                    if (decorations.underline) component.underlined = true;
                    if (decorations.strikethrough) component.strikethrough = true;
                    if (decorations.obfuscated) component.obfuscated = true;
                    
                    components.push(component);
                    colorIndex++;
                }
            }
            return JSON.stringify(components, null, 2);
        }

        function generateMOTD(text, gradientColors) {
            let result = '';
            let colorIndex = 0;
            const decoPrefix = getDecorationPrefix('\\u00A7');

            for (let char of text) {
                if (char === ' ') {
                    result += ' ';
                } else {
                    const color = gradientColors[colorIndex].replace('#', '');
                    result += `\\u00A7#${color}${decoPrefix}${char}`;
                    colorIndex++;
                }
            }
            return result;
        }

        // Initialize the app
        init();
    </script>
</body>
</html>
